<%- include('blog-list-tmp', { blogList: blogList,canReply: locals.canReply })%>

<script>
$(function () {
    // 设置焦点
    function setCursor(el, st, end) {
        if (el.setSelectionRange) {
            el.focus()
            el.setSelectionRange(st, end)
        } else if (el.createTextRange) {
            var range = el.createTextRange()
            range.collapse(true)
            range.moveEnd('character',end)
            range.moveStart('character',st)
            range.select()
        }
    }

    // 回复
    var $textContent = $('#text-content')
    $('.blog-list-reply').click(function (e) {
        e.preventDefault()
        var $target = $(e.target)

        // 获取内容和用户
        var content = $target.attr('data-content')
        var userName = $target.attr('data-userName')
        var nickName = $target.attr('data-nickName')

        // 设置内容并获取焦点
        $textContent.val(' // @' + nickName + ' - ' + userName + ' : ' + content)
        setCursor($textContent[0], 0, 0)
    })
})
</script>
